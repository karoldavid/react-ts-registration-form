(this["webpackJsonpreact-ts-registration-form"]=this["webpackJsonpreact-ts-registration-form"]||[]).push([[0],{268:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(15),s=r.n(i),c=r(36),o=(r(166),r(318)),u=r(321),l=r(307),d=r(21),j=r(24),b=r(27),m=r(140),O=r(38),h=r(138),x=r.n(h),f=r(312),p=r(322),g=r(325),v=r(310),w=r(324),T=r(319),E=r(12),y=r.n(E),C=r(26),P="CREATE_REGISTRATION",S="DELETE_REGISTRATION",k="GET_REGISTRATIONS",H=function(){var e=Object(C.a)(y.a.mark((function e(t){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://".concat(t,".mockapi.io/register"));case 2:if(!(r=e.sent).ok){e.next=5;break}return e.abrupt("return",r.json());case 5:throw new Error(r.statusText);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(C.a)(y.a.mark((function e(t){var r,n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.uuid,n=t.data,e.next=3,fetch("https://".concat(r,".mockapi.io/register"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)});case 3:if(!(a=e.sent).ok){e.next=6;break}return e.abrupt("return",a.json());case 6:throw new Error(a.statusText);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(C.a)(y.a.mark((function e(t){var r,n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.uuid,n=t.id,e.next=3,fetch("https://".concat(r,".mockapi.io/register/").concat(n),{method:"DELETE"});case 3:if(!(a=e.sent).ok){e.next=6;break}return e.abrupt("return",a.json());case 6:throw new Error(a.statusText);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=r(5),N=O.b().shape({username:O.d().min(5,"Username should be 5 chars min.").required("Username is required."),password:O.d().min(8,"Password should be 8 chars min.").required("Password is required."),confirmPassword:O.d().oneOf([O.c("password"),null],"Passwords must match."),email:O.d().email("Invalid email format.").required("Email is required."),phone:O.d(),newsletter:O.a()}).required(),q={username:"",password:"",confirmPassword:"",phone:"",email:"",newsletter:!0},D=function(e){var t,r=e.uuid,a=e.initialValues,i=Object(n.useState)(!1),s=Object(j.a)(i,2),o=s[0],O=s[1],h=function(e){var t=Object(c.useQueryClient)();return Object(c.useMutation)((function(t){return I({uuid:e,data:t})}),{mutationKey:P,onSuccess:function(){t.invalidateQueries([k])}})}(r),E=Object(b.e)({mode:"onSubmit",reValidateMode:"onChange",defaultValues:a,resolver:Object(m.a)(N)}),y=E.control,C=E.handleSubmit,S=E.formState.errors,H=E.reset;return Object(n.useEffect)((function(){h.isSuccess&&(O(!0),H(a))}),[h.isSuccess]),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("form",{id:"registration-form",onSubmit:C((function(e){h.mutate(e)})),children:Object(R.jsxs)(l.a,{container:!0,spacing:2,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",children:[Object(R.jsx)(l.a,{container:!0,item:!0,xs:12,spacing:2,children:h.isLoading&&Object(R.jsx)(u.a,{sx:{width:"100%"},children:Object(R.jsx)(v.a,{})})}),Object(R.jsx)(l.a,{container:!0,item:!0,xs:12,spacing:2,children:Object(R.jsx)(l.a,{item:!0,xs:6,children:Object(R.jsx)(b.a,{name:"username",control:y,render:function(e){var t,r=e.field;return Object(R.jsx)(T.a,Object(d.a)({fullWidth:!0,variant:"outlined",label:"Username",placeholder:"Username",margin:"normal",error:!!S.username,helperText:null===(t=S.username)||void 0===t?void 0:t.message},r))}})})}),Object(R.jsxs)(l.a,{container:!0,item:!0,xs:12,spacing:2,children:[Object(R.jsx)(l.a,{item:!0,xs:6,children:Object(R.jsx)(b.a,{name:"password",control:y,render:function(e){var t,r=e.field;return Object(R.jsx)(T.a,Object(d.a)({fullWidth:!0,variant:"outlined",type:"password",label:"Password",error:!!S.password,helperText:null===(t=S.password)||void 0===t?void 0:t.message},r))}})}),Object(R.jsx)(l.a,{item:!0,xs:6,children:Object(R.jsx)(b.a,{name:"confirmPassword",control:y,render:function(e){var t,r=e.field;return Object(R.jsx)(T.a,Object(d.a)({fullWidth:!0,variant:"outlined",type:"password",label:"Confirm Password",error:!!S.confirmPassword,helperText:null===(t=S.confirmPassword)||void 0===t?void 0:t.message},r))}})})]}),Object(R.jsx)(l.a,{container:!0,item:!0,xs:12,spacing:2,children:Object(R.jsx)(l.a,{item:!0,xs:6,children:Object(R.jsx)(b.a,{name:"email",control:y,render:function(e){var t,r=e.field;return Object(R.jsx)(T.a,Object(d.a)({fullWidth:!0,variant:"outlined",label:"Email",placeholder:"some@some.com",error:!!S.email,helperText:null===(t=S.email)||void 0===t?void 0:t.message},r))}})})}),Object(R.jsx)(l.a,{container:!0,item:!0,xs:12,spacing:2,children:Object(R.jsx)(l.a,{item:!0,xs:6,children:Object(R.jsx)(b.a,{name:"phone",control:y,render:function(e){var t,r=e.field;return Object(R.jsx)(T.a,Object(d.a)({fullWidth:!0,variant:"outlined",label:"Phone Number",placeholder:"0791878745",error:!!S.phone,helperText:null===(t=S.phone)||void 0===t?void 0:t.message},r))}})})}),Object(R.jsx)(l.a,{container:!0,item:!0,xs:12,spacing:2,children:Object(R.jsx)(l.a,{item:!0,xs:6,children:Object(R.jsx)(b.a,{name:"newsletter",control:y,render:function(e){var t=e.field;return Object(R.jsx)(g.a,{label:"Newsletter Subscription",control:Object(R.jsx)(p.a,Object(d.a)(Object(d.a)({},t),{},{defaultChecked:a.newsletter}))})}})})}),Object(R.jsx)(l.a,{container:!0,item:!0,xs:12,spacing:2,children:Object(R.jsx)(l.a,{item:!0,xs:6,children:Object(R.jsx)(f.a,{variant:"contained",color:"primary",type:"submit",disabled:!x()(S)||h.isLoading,children:"Submit"})})})]})}),Object(R.jsx)(w.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:o,autoHideDuration:6e3,message:null===(t=h.data)||void 0===t?void 0:t.message,onClose:function(){return O(!1)}})]})},F=r(139),Q=r(313),G=r(317),A=r(316),M=r(314),U=r(315),W=function(e){var t,r=e.uuid,a=Object(n.useState)(!1),i=Object(j.a)(a,2),s=i[0],o=i[1],b=function(e){return Object(c.useQuery)([k,e],(function(){return H(e)}))}(r),m=b.data,O=void 0===m?[]:m,h=b.isFetching,x=function(e){var t=Object(c.useQueryClient)();return Object(c.useMutation)((function(t){return L({uuid:e,id:t})}),{mutationKey:S,onSuccess:function(){t.invalidateQueries([k,e])}})}(r),p=Object(n.useMemo)((function(){return[{Header:"Name",columns:[{Header:"Username",accessor:"username"}]},{Header:"Contact Information",columns:[{Header:"Email",accessor:"email"},{Header:"Phone",accessor:"phone"}]},{Header:"Subscription",columns:[{Header:"Newsletter",accessor:function(e){return"boolean"===typeof e.newsletter?e.newsletter?"yes":"no":e.newsletter}},{Header:"Text",accessor:"text"}]},{id:"delete",Cell:function(e){return Object(R.jsx)(f.a,{color:"primary",disabled:x.isLoading||x.isError,onClick:function(){x.mutate(e.row.original.id)},children:"Delete"})}}]}),[x.isLoading,x.isError]),g=Object(F.useTable)({columns:p,data:O}),T=g.getTableProps,E=g.headerGroups,y=g.rows,C=g.prepareRow;return Object(n.useEffect)((function(){x.error&&!x.isLoading?o(!0):s&&o(!1)}),[x.error,x.isLoading]),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(l.a,{container:!0,spacing:2,direction:"row",justifyContent:"flex-start",alignItems:"flex-start",children:[Object(R.jsx)(l.a,{container:!0,item:!0,xs:12,spacing:2,children:Object(R.jsx)(u.a,{sx:{width:"100%"},children:h&&Object(R.jsx)(v.a,{})})}),Object(R.jsxs)(Q.a,Object(d.a)(Object(d.a)({},T()),{},{children:[Object(R.jsx)(M.a,{children:E.map((function(e){return Object(R.jsx)(U.a,Object(d.a)(Object(d.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(R.jsx)(A.a,Object(d.a)(Object(d.a)({},e.getHeaderProps()),{},{children:e.render("Header")}))}))}))}))}),Object(R.jsx)(G.a,{children:y.map((function(e,t){return C(e),Object(R.jsx)(U.a,Object(d.a)(Object(d.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(R.jsx)(A.a,Object(d.a)(Object(d.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))})]}))]}),x.error&&Object(R.jsx)(w.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:s,autoHideDuration:3e3,message:"Registration Deletion Error: ".concat(null===(t=x.error)||void 0===t?void 0:t.message),onClose:function(){o(!1),x.reset()}})]})},V="5e8c6579e61fbd00164aebec";var J=function(){return Object(R.jsxs)(l.a,{container:!0,direction:"column",children:[Object(R.jsx)(l.a,{item:!0,children:Object(R.jsx)(u.a,{m:8,children:Object(R.jsx)(D,{uuid:V,initialValues:q})})}),Object(R.jsx)(l.a,{item:!0,children:Object(R.jsx)(u.a,{m:8,children:Object(R.jsx)(W,{uuid:V})})})]})},_=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,327)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),i(e),s(e)}))},z=new c.QueryClient;s.a.render(Object(R.jsx)(a.a.StrictMode,{children:Object(R.jsxs)(c.QueryClientProvider,{client:z,children:[Object(R.jsx)(o.a,{}),Object(R.jsx)(J,{}),!1]})}),document.getElementById("root")),_()}},[[268,1,2]]]);
//# sourceMappingURL=main.e414072a.chunk.js.map